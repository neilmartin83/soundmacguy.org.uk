---
layout: post
title: "VirtualBox - disabling automatic update notifications"
date: 2017-11-30
coverImage: "update-rage.png"
---

```
"A new version of $application is available, please update now. Rainbows and Unicorns await!"
```

Seeing _this_ when you launch an application is the scourge of anyone who manages Macs in a lab environment. Hours of my life have been wasted spent trying to disable or otherwise suppress this stuff. Some apps set this as a preference using [Apple's CFPreferences API](https://developer.apple.com/library/content/documentation/CoreFoundation/Conceptual/CFPreferences/Concepts/BestPractices.html) (developers - this is how you should do it!), making it a case of just finding the appropriate key(s) and managing things with a Configuration Profile. If they use the [Sparkle framework](https://sparkle-project.org/), then Allister Banks' [Extinguish](https://github.com/arubdesu/Extinguish) script makes it even easier to manage the updates away. Other apps decide to _do their own thing_. Be it for cross-platform compatibility or another reason. VirtualBox, a free and awesome hypervisor, is one of our trickier customers.

<!--more-->

If you've ever installed VirtualBox, you'll know it's frequently updated, and it checks for new versions on launch, displaying an informative message when one is available. Not ideal. And if we poke around in the Preferences dialog, we see it _can_ be disabled:

![Update Pref.png](/images/update-pref.png)

VirtualBox stores preferences in its own XML file located here:

```
~/Library/VirtualBox/VirtualBox.xml
```

Take a peek inside, and the first thing you see is this:

```xml
** DO NOT EDIT THIS FILE.
** If you make changes to this file while any VirtualBox related application
** is running, your changes will be overwritten later, without taking effect.
** Use VBoxManage or the VirtualBox Manager GUI to make changes.
```

## Enter VBoxManage

**VBoxManage** is a command line tool that can do anything and everything with VirtualBox. [There's a whole chapter devoted to it in the manual, here](https://www.virtualbox.org/manual/ch08.html). It's fantastic and you can use it to automate loads of things. Anyway, we're interested in using its [**setextradata** command](https://www.virtualbox.org/manual/ch08.html#idm5711). Do read that section of the chapter - it's really informative, although it doesn't tell us _what_ the actual preference we want to set is. Unticking that **Check for Update** box, then peeking into the **VirtualBox.xml** file gives the game away (example below is from version 5.x):

![update xml pref.png](/images/update-xml-pref.png)

Setting the preference with **VBoxManage** is just a case of running this as the current logged in user:

**For VirtualBox version 5.x**

```bash
/usr/local/bin/vboxmanage setextradata global GUI/UpdateDate never
```

**For VirtualBox version 6.x** (thanks to **wejoey** for the tip!)

```bash
/usr/local/bin/vboxmanage setextradata global GUI/PreventApplicationUpdate true
```

I couldn't find a way to set preferences for VirtualBox globally (i.e. at the computer level), so I do it for each user individually. Not great, but something we can still automate and make happen when each user logs in. Please drop a comment below if you know how to set this at the computer level.

So, use your favourite tool to run this command at login, in the context of the current user. Here's the script I use in a Jamf Pro login policy, which I scope to a Smart Group that only contains Macs with VirtualBox installed:

**For VirtualBox version 5.x**

{% gist 367193b0daf383d2a3b8c6ad9506f21a %}

**For VirtualBox version 6.x**

{% gist c4066a4adcb3bc1d10c0fceb3eb9196e %}

So, user logs in, command runs, VirtualBox nags no more. This all happens silently and you get to feel like a ninja.

Happy manual-updating!
